# Запуск приложения
Для создания venv и загрузки зависимостей запустите скрипт в корневом каталоге
build.sh

Для старта приложение используйте скрипт
run.sh

Для подъёма локальной базы данных у вас должен быть установлен docker-compose

# Описание архитектуры приложения

Для того чтобы управлять доступом по правам пользователя был написан декоратор auth_decorator.py

Для того чтобы валидировать json тела запросов был добавлен cerberus и также обёрунт в декоратор request_validation_decarator.py, схемы для валидирования лежат в request_schemas.py.

Авторизация пользователя происходит путём получения идентификатора новой сессии. После чего она передётся в headers через параметр session

В dictionries лежит список привелегий пользователя, по сути необходимые только для сидирования их в базу.

Сущности базы описаны в папке entities

Вся работа с базой осуществляется через провайдеры лежащие в папке providers

Для хранения паролей в базе было использовано хеширование sha256 с добавлением sult, генератор хешей лежит в services/password.py

Для хранения настроек приложения был создан appconfig.json, который инициализируется в config.py.

Подключение к базе и генерация сессий в db.py

Для обработки бизнесовых ошибок были использованы исключения лежащие в exceptions.py

Формирование тел ответа было перенесено на функции в responses.py

# Задание №2

Метод по которому доступен результат вывода http://127.0.0.1:5000/users-async

Вся реализация находится в gateway.py

Функция get_users_data создаёт асинхронный вызовов на метод обёртку get_source_data, которая управляет timeout выделенный на этот метод, он в свою очередь уже вызывает метод get, который непосредственно делает запрос.

После того как ответы получены, данные отправляются мапер, так как задача походит на highload, для возможных ситуаций когда id не хватает, если например они удалены, или же выборки слишком большие, я написал функцию бинарного поиска для нахождения места среза данных, после поисков среза происходит ещё два прогона цикла для заполнения первых частей выборки и после вторых.